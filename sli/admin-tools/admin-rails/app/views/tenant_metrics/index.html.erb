<p id="error_notice"><%= @error_notice %></p>
<p id="notice"><%= @notice %></p>

<h3>Tenant Collection Information</h3>

<hr/>

<!-- {:tenantId => {:collection => {:entityCount => 0, :size => 0} } } -->
<table id="tenant-metrics-table">
  <thead>
  <tr>
    <th>Tenant</th>
    <th>Entities</th>
    <th>Total Size (KB)</th>
  </tr>
  </thead>
  <tbody>
  <%  @tenant_metrics.metrics().each do |tenant_id, tenant_metric|

      if tenant_id == "== Totals =="
           @totals = tenant_metric
           next
      end

      concat ("<tr><td class='tenant_metrics_collection_name'><b><a href='http://local.slidev.org:3000/tenant_metrics/" + tenant_id + "?details=true'>" + tenant_id + "</a></b></td>").html_safe

      tenant_metric.each do |collectionName, collectionData|
        if collectionName == "== Totals =="
          concat ("<td class='tenant_metrics_entity_count'>" + collectionData['entityCount'].to_s() + "</td>").html_safe
          concat ("<td class='tenant_metrics_data_size' id='metric_value_last'>" + ("%.2f " % (collectionData['size'] / 1024)) + "</td>").html_safe
        end
      end
      concat ("</tr>").html_safe
  end

    concat ("</tbody><tfoot><tr class='metrics_summary'><td class='tenant_metrics_collection_name'>Total for <span class='tenant_metrics_collection_count'>" + ("%d" % (@tenant_metrics.metrics().size - 1)) + "</span> Tenants</td><td class='tenant_metrics_entity_count'>" + @totals["== Totals =="]["entityCount"].to_s() + "</td>").html_safe
    concat ("<td class='tenant_metrics_data_size' id='metric_value_last'>" + ("%.2f " % (@totals['== Totals ==']['size'] / 1024)) + "</td></tr></tfoot>").html_safe

%>

</table>
<br/>
<br/>
