<% def require_marker %>
<% "<span style=\"color:red\">*</span>" %>
<% end %>

<%# TODO: The method below is pretty ugly. Will fix when I actually figure out what I'm doing :) %>
<% def print(f, field, field_name, is_password_field, password_field = nil) %>
    <% required = required?(@user_account_registration, field) %>
    <% error = "" %>
    <% if @user_account_registration.errors[field].any? %>
        <% error = " error" %>
    <% elsif is_password_field && @user_account_registration.errors[password_field].any? %>
        <% error = " error" %>
    <% end %>
    <%= tag("div", :class => "control-group#{error}") %>
    <div class="control-label">
      <%= f.label field do %>
          <% required_string = "" %>
          <% if required %>
              <% required_string = " #{require_marker}" %>
          <% end %>
          <% "#{field_name}#{required_string}".html_safe %>
      <% end %>
    </div>
    <div class="controls">
      <% if is_password_field %>
          <%= f.password_field password_field %>
      <% else %>
          <% if required %>
              <%= f.text_field field %>
          <% else %>
              <%= f.text_field field, :placeholder => "optional" %>
          <% end %>
      <% end %>

      <% if @user_account_registration.errors[field].any? %>
            <span class="help-inline">
              <%= @user_account_registration.errors[field][0] %>
            </span>
      <% end %>
    </div>
    </div>
<% end %>

<%= form_for(@user_account_registration) do |f| %>
    <% if @user_account_registration.errors.any? %>
        <div class="alert alert-error">
          There was an error processing your registration. Please fix any highlighted fields below.
        </div>
    <% end %>
    <fieldset>
      <% print f, :firstName, "First Name", false %>
      <% print f, :lastName, "Last Name", false %>
      <% print f, :vendor, "Company", false %>
      <% print f, :email, "Email", false %>
      <% print f, :password, "Password", true, :password %>
      <% print f, :confirmation, "Re-enter Password", true, :password_confirmation %>
      <div style="margin-bottom: 9px;">
        <span style="color:red;">*</span> = required fields
      </div>
      <%# recaptcha section %>
      <% if APP_CONFIG['recaptcha_disable'] == true %>
          <span style="color:red; font-weight:bold;">Captcha validation is disabled to allow automated testing.</span>
      <% end %>
      <% error = " error" if @user_account_registration.errors[:recaptcha].any? %>
      <%= tag("div", :class => "control-group#{error}") %>
      <%= get_captcha(:options => {:theme => 'clean', :tabindex => 7, :lang => 'en'}, :ssl => 'true').html_safe %>
      <div style="margin-bottom:10px;margin-top:10px;font-style:italic;font-size:12px" >
      	<b>Note:</b> in order to complete the registration process, you will be required to accept the 
      	<a href=<%=APP_CONFIG['terms_url'] %> target="_blank">SLC Developer Terms of Service</a> and 
      	<a href=<%= APP_CONFIG['privacy_policy_url']%> target="_blank">SLC Privacy Policy</a><br/>
      </div>
      <% if @user_account_registration.errors[:recaptcha].any? %>
            <span class="help-inline">
				<%= @user_account_registration.errors[:recaptcha][0] %>
			</span>
      <% end %>
      </div>

      <div class="form-actions">
        <%= f.submit "Submit",
                     :id => "submitRegButton", :class => "btn btn-primary"%>
        <%= link_to "Cancel", APP_CONFIG['redirect_slc_url'], :class =>"btn" %>
      </div>
    </fieldset>
<% end %>
