require "cucumber/rake/task"

task :default => :production

desc "Default Task: Run All Acceptances Tests"
task :production => [:schoolTests, :studentTests, :teacherTests, :associationTests, :securityTests, :sectionTests] do
  puts "Complete All Tests"
end

desc "Run API Acceptances Tests"
task :apiTests => [:schoolTests, :studentTests, :teacherTest, :associationTests, :sectionTests] do
  puts "Completed API Tests"
end

desc "Run Section Tests"
task :sectionTests do
  sh "cucumber test/features/api/section --tags ~@wip -f junit --out . -f pretty" do |success, exit_code|
    puts "Exited with code #{exit_code.exitstatus}" unless success
  end
end

desc "Run School Tests"
task :schoolTests do
  sh "cucumber test/features/api/school --tags ~@wip -f junit --out . -f pretty" do |success, exit_code|
    puts "Exited with code: #{exit_code.exitstatus}" unless success
  end
end

desc "Run Student Tests"
task :studentTests do
  sh "cucumber test/features/api/student --tags ~@wip -f junit --out . -f pretty" do |success, exit_code|
    puts "Exited with code: #{exit_code.exitstatus}" unless success
  end
end

desc "Run Teacher Tests"
task :teacherTests do
  sh "cucumber test/features/api/teacher --tags ~@wip -f junit --out . -f pretty" do |success, exit_code|
    puts "Exited with code: #{exit_code.exitstatus}" unless success
  end
end

desc "Run Association Tests"
task :associationTests do
  sh "cucumber test/features/api/associations --tags ~@wip -f junit --out . -f pretty" do |success, exit_code|
    puts "Exited with code: #{exit_code.exitstatus}" unless success
  end
end

desc "Run Security Tests"
task :securityTests do
  sh "cucumber test/features/security --tags ~@wip -f junit --out . -f pretty" do |success, exit_code|
    puts "Exited with code: #{exit_code.exitstatus}" unless success
  end
end