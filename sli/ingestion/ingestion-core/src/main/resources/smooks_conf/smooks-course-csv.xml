<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd" xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd"
  xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.3.xsd" xmlns:camel="http://www.milyn.org/xsd/smooks/camel-1.4.xsd"
  xmlns:csv="http://www.milyn.org/xsd/smooks/csv-1.2.xsd">

  <params>
    <param name="stream.filter.type">SAX</param>
    <param name="terminate.on.visitor.exception">false</param>
  </params>

  <csv:reader
    fields="CourseTitle,NumberOfParts,CourseCode_IdentificationSystem,CourseCode_AssigningOrganizationCode,CourseCode_CourseCodeID,CourseLevel,CourseLevelCharacteristics,
		GradesOffered,SubjectArea,CourseDescription,DateCourseAdopted,HighSchoolCourseRequirement,CourseGPAApplicability,
		CourseDefinedBy,MinCredit,MinCreditType,MinCreditConversion,MaxCredit,MaxCreditType,MaxCreditConversion,CareerPathway">
  </csv:reader>

  <jb:bean beanId="record" class="org.slc.sli.ingestion.NeutralRecord" createOnElement="csv-record">
    <jb:expression property="recordType">'course'</jb:expression>
    
    <jb:value property="localId" data="CourseTitle" />
    <jb:wiring property="attributes" beanIdRef="courseAttributes" />
  </jb:bean>

  <jb:bean beanId="courseAttributes" class="java.util.HashMap" createOnElement="csv-record">

    <jb:value property="courseTitle" data="csv-record/CourseTitle" />

    <jb:value property="numberOfParts" data="csv-record/NumberOfParts" decoder="Integer" />

    <!-- CourseCode -->
    <jb:wiring property="courseCode" beanIdRef="courseCodeTypeArray" />

    <jb:value property="courseLevel" data="csv-record/CourseLevel" />

    <jb:wiring property="courseLevelCharacteristics" beanIdRef="CourseLevelCharacteristicsArray" />

	<jb:wiring property="gradesOffered" beanIdRef="CourseCSV_gradesOfferedArray" />

    <jb:value property="subjectArea" data="csv-record/SubjectArea" />
    <jb:value property="courseDescription" data="csv-record/CourseDescription" />
    <jb:value property="dateCourseAdopted" data="csv-record/DateCourseAdopted" />
    <jb:value property="highSchoolCourseRequirement" data="csv-record/HighSchoolCourseRequirement" decoder="Boolean"/>
    <jb:value property="courseGPAApplicability" data="csv-record/CourseGPAApplicability" />
    <jb:value property="courseDefinedBy" data="csv-record/CourseDefinedBy" />

    <!-- MinimumAvailableCredit -->
    <jb:wiring property="minimumAvailableCredit" beanIdRef="MinimumAvailableCreditType" />

    <!-- MaximumAvilableCredit -->
    <jb:wiring property="maximumAvailableCredit" beanIdRef="MaximumAvailableCreditType" />

    <jb:value property="careerPathway" data="csv-record/CareerPathway" />

  </jb:bean>
  
  <jb:bean beanId="CourseCSV_gradesOfferedArray" class="java.util.ArrayList" createOnElement="csv-record">
    <jb:value data="GradesOffered" />
  </jb:bean>

  <jb:bean beanId="courseCodeTypeArray" class="java.util.ArrayList" createOnElement="csv-record">
    <jb:wiring beanIdRef="courseCodeType" />
  </jb:bean>
  <jb:bean beanId="courseCodeType" class="java.util.HashMap" createOnElement="csv-record">
    <jb:value property="ID" data="csv-record/CourseCode_CourseCodeID" />
    <jb:value property="identificationSystem" data="csv-record/CourseCode_IdentificationSystem" />
    <jb:value property="assigningOrganizationCode" data="csv-record/CourseCode_AssigningOrganizationCode" />
  </jb:bean>

  <jb:bean beanId="CourseLevelCharacteristicsArray" class="java.util.ArrayList" createOnElement="csv-record">
    <jb:value data="CourseLevelCharacteristics" />
  </jb:bean>

  <jb:bean beanId="MinimumAvailableCreditType" class="java.util.HashMap" createOnElement="csv-record">
    <jb:value property="credit" data="csv-record/MinCredit" decoder="Double" />
    <jb:value property="creditType" data="csv-record/MinCreditType" />
    <jb:value property="creditConversion" data="csv-record/MinCreditConversion" decoder="Double" />
  </jb:bean>

  <jb:bean beanId="MaximumAvailableCreditType" class="java.util.HashMap" createOnElement="csv-record">
    <jb:value property="credit" data="csv-record/MaxCredit" decoder="Double" />
    <jb:value property="creditType" data="csv-record/MaxCreditType" />
    <jb:value property="creditConversion" data="csv-record/MaxCreditConversion" decoder="Double" />
  </jb:bean>


</smooks-resource-list>

