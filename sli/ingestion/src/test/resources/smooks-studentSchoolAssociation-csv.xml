
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
	xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd"
	xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.3.xsd"
	xmlns:camel="http://www.milyn.org/xsd/smooks/camel-1.4.xsd" xmlns:csv="http://www.milyn.org/xsd/smooks/csv-1.2.xsd">

	<params>
		<param name="stream.filter.type">SAX</param>
		<param name="terminate.on.visitor.exception">false</param>
	</params>

	<csv:reader
		fields="AssociationId,$ignore$2,StudentUniqueStateId,$ignore$22,StateOrganizationId,$ignore$+">
	</csv:reader>

	<!-- Student School Association mapping -->

	<jb:bean beanId="record" class="org.slc.sli.ingestion.NeutralRecord"
		createOnElement="InterchangeStudentEnrollment/StudentSchoolAssociation">

		<!-- jb:value property="sourceId" data="" / -->
		<!-- jb:value property="jobId" data="" / -->
		<jb:expression property="recordType">'StudentSchoolAssociation'</jb:expression>
		<jb:wiring property="attributes" beanIdRef="studentSchoolAssociationAttributes" />
		<jb:wiring property="localParentIds" beanIdRef="studentSchoolAssociationParentIds" />
	</jb:bean>

	<jb:bean beanId="studentSchoolAssociationParentIds" class="java.util.HashMap"
		createOnElement="InterchangeStudentEnrollment/StudentSchoolAssociation">

		<jb:value property="Student"
			data="StudentReference/StudentIdentity/StudentUniqueStateId" />
		<jb:value property="School"
			data="SchoolReference/EducationalOrgIdentity/StateOrganizationId" />
	</jb:bean>


</smooks-resource-list>