
<smooks-resource-list xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd" xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.3.xsd"
  xmlns:camel="http://www.milyn.org/xsd/smooks/camel-1.4.xsd" xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd">

  <core:filterSettings defaultSerialization="false" />


  <jb:bean beanId="records" class="java.util.ArrayList" createOnElement="#document">
    <jb:wiring beanIdRef="record" />
  </jb:bean>


  <!-- Student mapping -->

  <jb:bean beanId="record" class="org.slc.sli.ingestion.NeutralRecord" createOnElement="InterchangeStudent/Student">

    <!-- jb:value property="sourceId" data="" / -->
    <!-- jb:value property="jobId" data="" / -->
    <jb:expression property="recordType">'student'</jb:expression>
    <jb:value property="localId" data="StudentUniqueStateId" />
    <jb:wiring property="attributes" beanIdRef="studentAttributes" />
  </jb:bean>

  <jb:bean beanId="studentAttributes" class="java.util.HashMap" createOnElement="InterchangeStudent/Student">

    <jb:value property="studentUniqueStateId" data="StudentUniqueStateId" />
    <jb:value property="firstName" data="Name/FirstName" />
    <jb:value property="middleName" data="Name/MiddleName" />
    <jb:value property="lastSurname" data="Name/LastSurname" />
    <jb:value property="birthDate" data="BirthData/BirthDate" />
    <jb:value property="sex" data="Sex" />
  </jb:bean>


  <!-- School mapping -->

  <jb:bean beanId="record" class="org.slc.sli.ingestion.NeutralRecord" createOnElement="InterchangeEducationOrganization/School">

    <!-- jb:value property="sourceId" data="" / -->
    <!-- jb:value property="jobId" data="" / -->
    <jb:expression property="recordType">'school'</jb:expression>
    <jb:value property="localId" data="StateOrganizationId" />
    <jb:wiring property="attributes" beanIdRef="schoolAttributes" />
  </jb:bean>

  <jb:bean beanId="schoolAttributes" class="java.util.HashMap" createOnElement="InterchangeEducationOrganization/School">

    <jb:value property="stateOrganizationId" data="StateOrganizationId" />
    <jb:value property="fullName" data="NameOfInstitution" />
  </jb:bean>


  <!-- Student School Association mapping -->

  <jb:bean beanId="record" class="org.slc.sli.ingestion.NeutralRecord" createOnElement="InterchangeStudentEnrollment/StudentSchoolAssociation">

    <!-- jb:value property="sourceId" data="" / -->
    <!-- jb:value property="jobId" data="" / -->
    <jb:expression property="recordType">'studentSchoolAssociation'</jb:expression>
    <jb:wiring property="attributes" beanIdRef="studentSchoolAssociationAttributes" />
    <jb:wiring property="localParentIds" beanIdRef="studentSchoolAssociationParentIds" />
  </jb:bean>

  <jb:bean beanId="studentSchoolAssociationParentIds" class="java.util.HashMap"
    createOnElement="InterchangeStudentEnrollment/StudentSchoolAssociation">

    <jb:value property="Student" data="StudentReference/StudentIdentity/StudentUniqueStateId" />
    <jb:value property="School" data="SchoolReference/EducationalOrgIdentity/StateOrganizationId" />
  </jb:bean>

  <jb:bean beanId="studentSchoolAssociationAttributes" class="java.util.HashMap"
    createOnElement="InterchangeStudentEnrollment/StudentSchoolAssociation">

    <jb:value property="entryDate" data="BirthData/BirthDate" />
    <jb:value property="entryGradeLevel" data="EntryGradeLevel" />
  </jb:bean>

</smooks-resource-list>
