
<smooks-resource-list 
   xmlns="http://www.milyn.org/xsd/smooks-1.1.xsd"
   xmlns:core="http://www.milyn.org/xsd/smooks/smooks-core-1.4.xsd"
   xmlns:jb="http://www.milyn.org/xsd/smooks/javabean-1.3.xsd"
   xmlns:camel="http://www.milyn.org/xsd/smooks/camel-1.4.xsd"
   xmlns:csv="http://www.milyn.org/xsd/smooks/csv-1.2.xsd"
   >
   
   <params>
      <param name="stream.filter.type">SAX</param>
      <param name="terminate.on.visitor.exception">false</param>
   </params>

   <csv:reader fields="StudentId,StudentUniqueStateId,$ignore$5,FirstName,MiddleName,LastSurname,$ignore$8,Sex,BirthDate,$ignore$+">
   </csv:reader>

   <jb:bean beanId="record" class="org.slc.sli.ingestion.NeutralRecord"
      createOnElement="csv-record">
      
      <jb:expression property="recordType">'Student'</jb:expression>
      <jb:value property="localId" data="csv-record/StudentUniqueStateId" decoder="Long" />
      <jb:wiring property="attributes" beanIdRef="studentAttributes" />
   </jb:bean>
   
   <jb:bean beanId="studentAttributes" class="java.util.HashMap" 
      createOnElement="csv-record">
       
      <jb:value property="firstName" data="csv-record/FirstName" />
      <jb:value property="middleName" data="csv-record/MiddleName" />
      <jb:value property="lastSurname" data="csv-record/LastSurname" />
      <jb:value property="birthDate" data="csv-record/BirthDate" decoder="SqlDate" >      
         <jb:decodeParam name="format">yyyy-MM-dd</jb:decodeParam>
         <jb:decodeParam name="locale">en_US</jb:decodeParam>         
      </jb:value>
      <jb:value property="sex" data="csv-record/Sex" decoder="Enum">
         <jb:decodeParam name="enumType">org.slc.sli.domain.enums.SexType</jb:decodeParam>
      </jb:value>
   </jb:bean>
 
</smooks-resource-list>